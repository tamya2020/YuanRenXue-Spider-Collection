## 一、Hook
在函数被调用前，对函数进行替换，在页面加载前，通过替换JS上下文的对象，将JS上下文中的对象和方法替换掉。
```
function mytest (msg) {
    console.log(msg)
}
// 1.需要Hook的函数
temp = mytest;
var newTest = function (msg) {
    console.log("执行前的操作如修改参数");
    msg += "success";
// 2.执行原本方法或其他方法
    mytest(msg);
    console.log("执行完毕后操作如抛出异常")
};
newTest("First Name")
```

## 二、油猴参数

| 属性名          | 作用                                                                                                                             |
|--------------|--------------------------------------------------------------------------------------------------------------------------------|
| @name        | 油猴脚本的名字                                                                                                                        |
| @namespace   | 命名空间，用来区分相同名称的脚本，一般写成作者名字或者网址就可以了                                                                                              |
| @version     | 脚本版本，油猴脚本的更新会读取这个版本号                                                                                                           |
| @description | 描述，用来告诉用户这个脚本是干什么用的                                                                                                            |
| @author      | 作者名字                                                                                                                           |
| @match       | 只有匹配的网址才会执行对应的脚本，例如*、http://*、http://www.baidu.com/*等                                                                          |
| @grant       | 指定脚本运行所需权限，如果脚本拥有相应的权限，就可以调用油猴扩展提供的API与浏览器进行交互。如果设置为none的话，则不使用沙箱环境，脚本会直接运行在网页的环境中，这时候无法使用大部分油猴扩展的API。如果不指定的话，油猴会默认添加几个最常用的API |
| @require     | 如果脚本依赖其他js库的话，可以使用require指令，在运行脚本之前先加载其他库，常见用法是加载jquery，导库，和node差不多，相当于导入外部的脚本                                                 |
| @run-at      | 脚本注入时机，这个比较重要，有时候是能不能hook到的关键，document-start：网页开始时；document-body：body出现时；document-end：载入时或者之后执行；document-idle：载入完成后执行，默认选项     |
| @connect     | 当用户使用GM_xmlhttpRequest请求远程数据的时候，需要使用connect指定允许访问的域名，支持域名、子域名、IP地址以及*通配符                                                       |
| @updateURL   | 脚本更新网址，当油猴扩展检查更新的时候，会尝试从这个网址下载脚本，然后比对版本号确认是否更新                                                                                 |
